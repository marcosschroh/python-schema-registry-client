
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="avro, kafka, client, faust, schema">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../serializer/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>SchemaRegistryClient Api - Python Schema Registry Client</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#schema-registry-client" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Python Schema Registry Client" class="md-header__button md-logo" aria-label="Python Schema Registry Client" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Schema Registry Client
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SchemaRegistryClient Api
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/marcosschroh/python-schema-registry-client" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    marcosschroh/python-schema-registry-client
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Python Schema Registry Client" class="md-nav__button md-logo" aria-label="Python Schema Registry Client" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Schema Registry Client
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/marcosschroh/python-schema-registry-client" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    marcosschroh/python-schema-registry-client
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    SchemaRegistryClient Api
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    SchemaRegistryClient Api
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaRegistryClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaRegistryClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.check_version" class="md-nav__link">
    <span class="md-ellipsis">
      check_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.delete_subject" class="md-nav__link">
    <span class="md-ellipsis">
      delete_subject
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.delete_version" class="md-nav__link">
    <span class="md-ellipsis">
      delete_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      get_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_schema" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_schema_subject_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema_subject_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_subjects" class="md-nav__link">
    <span class="md-ellipsis">
      get_subjects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.test_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      test_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.update_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      update_compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient" class="md-nav__link">
    <span class="md-ellipsis">
      AsyncSchemaRegistryClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AsyncSchemaRegistryClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.check_version" class="md-nav__link">
    <span class="md-ellipsis">
      check_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.delete_subject" class="md-nav__link">
    <span class="md-ellipsis">
      delete_subject
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.delete_version" class="md-nav__link">
    <span class="md-ellipsis">
      delete_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      get_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_schema" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_schema_subject_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema_subject_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_subjects" class="md-nav__link">
    <span class="md-ellipsis">
      get_subjects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.test_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      test_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.update_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      update_compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      Auth
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../serializer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serializers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Faust integration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schemas
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../schemaregistry_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Schema Registry Server
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaRegistryClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaRegistryClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.check_version" class="md-nav__link">
    <span class="md-ellipsis">
      check_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.delete_subject" class="md-nav__link">
    <span class="md-ellipsis">
      delete_subject
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.delete_version" class="md-nav__link">
    <span class="md-ellipsis">
      delete_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      get_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_schema" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_schema_subject_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema_subject_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_subjects" class="md-nav__link">
    <span class="md-ellipsis">
      get_subjects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.get_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.test_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      test_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.SchemaRegistryClient.update_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      update_compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient" class="md-nav__link">
    <span class="md-ellipsis">
      AsyncSchemaRegistryClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AsyncSchemaRegistryClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.check_version" class="md-nav__link">
    <span class="md-ellipsis">
      check_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.delete_subject" class="md-nav__link">
    <span class="md-ellipsis">
      delete_subject
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.delete_version" class="md-nav__link">
    <span class="md-ellipsis">
      delete_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_by_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      get_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_schema" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_schema_subject_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_schema_subject_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_subjects" class="md-nav__link">
    <span class="md-ellipsis">
      get_subjects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.get_versions" class="md-nav__link">
    <span class="md-ellipsis">
      get_versions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.test_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      test_compatibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema_registry.client.AsyncSchemaRegistryClient.update_compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      update_compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      Auth
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="schema-registry-client">Schema Registry Client</h1>
<p>The <code>Schema Registry Client</code> consumes the API exposed by the <code>schema-registry</code> to operate resources that are <code>avro</code> and <code>json</code> schemas.</p>
<p>You probably won't use this but is good to know that exists. The <code>MessageSerializer</code> is whom interact with the <code>SchemaRegistryClient</code></p>


<div class="doc doc-object doc-class">



<h2 id="schema_registry.client.SchemaRegistryClient" class="doc doc-heading">
            <code>schema_registry.client.SchemaRegistryClient</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="schema_registry.client.client.BaseClient">BaseClient</span></code></p>


      <p>A client that talks to a Schema Registry over HTTP.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><span class="filename">Usage</span><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">schema_registry.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">SchemaRegistryClient</span><span class="p">,</span> <span class="n">schema</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">SchemaRegistryClient</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:8081&quot;</span><span class="p">)</span>

<span class="n">deployment_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;record&quot;</span><span class="p">,</span>
    <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;com.kubertenes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;AvroDeployment&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;replicas&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">}</span>

<span class="n">avro_schema</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">AvroSchema</span><span class="p">(</span><span class="n">deployment_schema</span><span class="p">)</span>
<span class="n">schema_id</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;test-deployment&quot;</span><span class="p">,</span> <span class="n">avro_schema</span><span class="p">)</span>
</code></pre></div>
</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>url</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[str, <span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Url to schema registry or dictionary containing client configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ca_location</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File or directory path to CA certificate(s) for verifying the Schema Registry key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cert_location</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to public key used for authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>key_location</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to private key used for authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>key_password</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Key password</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extra_headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on every requests.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="httpx.Timeout">Timeout</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>pool_limits</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="httpx.Limits">Limits</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The connection pool configuration to use when determining the maximum number of concurrently
open HTTP connections.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>auth</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="httpx.Auth">Auth</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Auth credentials.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>schema_registry/client/client.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SchemaRegistryClient</span><span class="p">(</span><span class="n">BaseClient</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A client that talks to a Schema Registry over HTTP.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python title=&quot;Usage&quot;</span>
<span class="sd">        from schema_registry.client import SchemaRegistryClient, schema</span>

<span class="sd">        client = SchemaRegistryClient(url=&quot;http://127.0.0.1:8081&quot;)</span>

<span class="sd">        deployment_schema = {</span>
<span class="sd">            &quot;type&quot;: &quot;record&quot;,</span>
<span class="sd">            &quot;namespace&quot;: &quot;com.kubertenes&quot;,</span>
<span class="sd">            &quot;name&quot;: &quot;AvroDeployment&quot;,</span>
<span class="sd">            &quot;fields&quot;: [</span>
<span class="sd">                {&quot;name&quot;: &quot;image&quot;, &quot;type&quot;: &quot;string&quot;},</span>
<span class="sd">                {&quot;name&quot;: &quot;replicas&quot;, &quot;type&quot;: &quot;int&quot;},</span>
<span class="sd">                {&quot;name&quot;: &quot;port&quot;, &quot;type&quot;: &quot;int&quot;},</span>
<span class="sd">            ],</span>
<span class="sd">        }</span>

<span class="sd">        avro_schema = schema.AvroSchema(deployment_schema)</span>
<span class="sd">        schema_id = client.register(&quot;test-deployment&quot;, avro_schema)</span>
<span class="sd">        ```</span>

<span class="sd">    Args:</span>
<span class="sd">        url: Url to schema registry or dictionary containing client configuration.</span>
<span class="sd">        ca_location: File or directory path to CA certificate(s) for verifying the Schema Registry key.</span>
<span class="sd">        cert_location: Path to public key used for authentication.</span>
<span class="sd">        key_location: Path to private key used for authentication.</span>
<span class="sd">        key_password: Key password</span>
<span class="sd">        extra_headers: Extra headers to add on every requests.</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests.</span>
<span class="sd">        pool_limits: The connection pool configuration to use when determining the maximum number of concurrently</span>
<span class="sd">            open HTTP connections.</span>
<span class="sd">        auth: Auth credentials.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_METHODS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Method </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> is invalid; valid methods include </span><span class="si">{</span><span class="n">utils</span><span class="o">.</span><span class="n">VALID_METHODS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">_headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_headers</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">client_kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">_headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
        <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a schema for a subject.</span>

<span class="sd">        Schema can be avro or json, and can be presented as a parsed schema or a string.</span>
<span class="sd">        If schema is a string, the `schema_type` kwarg must be used to indicate</span>
<span class="sd">        what type of schema the string is (`AVRO` by default).</span>
<span class="sd">        If the schema is already parsed, the schema_type is inferred directly from the parsed schema.</span>
<span class="sd">        Multiple instances of the same schema will result in cache misses.</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            schema: Avro or JSON schema to be registered</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">            schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            schema_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

        <span class="n">schema_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">schema_id</span>

        <span class="c1"># Check if schema is already registered. This should normally work even if</span>
        <span class="c1"># the schema registry we&#39;re talking to is readonly, enabling a setup where</span>
        <span class="c1"># only CI/CD can do changes to Schema Registry, and production code has readonly</span>
        <span class="c1"># access</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">schema_id</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
            <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="p">(</span>
            <span class="n">result</span><span class="p">,</span>
            <span class="n">code</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_401_UNAUTHORIZED</span><span class="p">,</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_403_FORBIDDEN</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unauthorized access&quot;</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_409_CONFLICT</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Incompatible schema&quot;</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid schema&quot;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unable to register schema&quot;</span>

        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema_id</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_subjects</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of all registered subjects in your Schema Registry.</span>

<span class="sd">        GET /subjects/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of registered subjects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_subjects&quot;</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get subjects&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_subject</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes the specified subject and its associated compatibility level if registered.</span>

<span class="sd">        It is recommended to use this API only when a topic needs to be</span>
<span class="sd">        recycled or in development environments.</span>

<span class="sd">        DELETE /subjects/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List version of the schema deleted under this subject</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_subject&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete subject&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a parsed avro schema by id or None if not found.</span>

<span class="sd">        GET /schemas/ids/{int: id}</span>

<span class="sd">        Args:</span>
<span class="sd">            schema_id: Schema Id</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            Avro or JSON schema</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_by_id&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">schema</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_schema_subject_versions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">SubjectVersion</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the subject-version pairs identified by the input ID.</span>

<span class="sd">        GET /schemas/ids/{int: id}/versions</span>

<span class="sd">        Args:</span>
<span class="sd">            schema_id: Schema Id</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of Subject/Version pairs where Schema Id is registered</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema_subject_versions&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SubjectVersion</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">],</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">ret</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a specific version of the schema registered under this subject.</span>

<span class="sd">        GET /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            version: version id. If is None, the latest schema is returned</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            The SchemaVersion utils.SchemaVersion if response was succeeded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> under subjet </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not success version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_versions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of versions registered under the specified subject.</span>

<span class="sd">        GET subjects/{subject}/versions</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List  version of the schema registered under this subject</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_versions&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to get the versions for subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_version</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes a specific version of the schema registered under this subject.</span>

<span class="sd">        This only deletes the version and the schema ID remains intact making</span>
<span class="sd">        it still possible to decode data using the schema ID.</span>
<span class="sd">        This API is recommended to be used only in development environments or</span>
<span class="sd">        under extreme circumstances where-in, its required to delete a previously</span>
<span class="sd">        registered schema for compatibility purposes or re-register previously registered schema.</span>

<span class="sd">        DELETE /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            version: Version of the schema to be deleted.</span>
<span class="sd">                Valid values for versionId are between [1,2^31-1] or the string &quot;latest&quot;.</span>
<span class="sd">                &quot;latest&quot; deletes the last registered schema under the specified subject.</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            Version of the schema deleted. If the subject or version does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_client_error</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete the version&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_version</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
        <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a schema has already been registered under the specified subject.</span>

<span class="sd">        If so, this returns the schema string along with its globally unique identifier,</span>
<span class="sd">        its version under this subject and the subject name.</span>

<span class="sd">        POST /subjects/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            schema: Avro or JSON schema headers typing.Dict: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">            schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            SchemaVersion If schema exist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_versions</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
        <span class="n">schema_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">all</span><span class="p">((</span><span class="n">version</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;check_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
            <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> under subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

            <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span>
                <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
                <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span>
                <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
                <span class="n">schema</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get version of a schema&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
        <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the compatibility of a candidate parsed schema for a given subject.</span>

<span class="sd">        By default the latest version is checked against.</span>

<span class="sd">        POST /compatibility/subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            schema: Avro or JSON schema headers typing.Dict: Extra headers to add on the requests</span>
<span class="sd">            version: The schema version to test compatibility against</span>
<span class="sd">            verbose: Whether or not to return the errors in case of incompatibility</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">            schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            If verbose if False: return a boolean wether the schema is compatible with the latest version for a subject</span>
<span class="sd">            If verbose is True: return the API reponse with both the compatibility boolean and the possible errors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;test_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
            <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">},</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject or version not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unprocessable entity. Invalid subject or schema: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_compatible&quot;</span><span class="p">)</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to check the compatibility&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the compatibility level.</span>

<span class="sd">        If subject is None, the compatibility level is global.</span>

<span class="sd">        PUT /config/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            level: one of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">                FULL, FULL_TRANSITIVE, NONE</span>
<span class="sd">            subject: Option subject</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            Whether the compatibility was updated</span>

<span class="sd">        Raises:</span>
<span class="sd">            ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid level specified: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;update_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;compatibility&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">}</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to update level: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current compatibility level for a subject.</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            One of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">                FULL, FULL_TRANSITIVE, NONE</span>

<span class="sd">        Raises:</span>
<span class="sd">            ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">                compatibility level was returned</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">compatibility</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compatibilityLevel&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="s2">&quot;No compatibility was returned&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">compatibility</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid compatibility level received: </span><span class="si">{</span><span class="n">error_msg_suffix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
                    <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">compatibility</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to fetch compatibility level. Error code: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.check_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span> <span class="n">schema_type</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Check if a schema has already been registered under the specified subject.</p>
<p>If so, this returns the schema string along with its globally unique identifier,
its version under this subject and the subject name.</p>
<p>POST /subjects/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>, str, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema headers typing.Dict: Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema_type</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;AVRO&#39;, &#39;JSON&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of schema to parse if <code>schema</code> is a string. Default "AVRO"</p>
              </div>
            </td>
            <td>
                  <code><span title="schema_registry.client.utils.AVRO_SCHEMA_TYPE">AVRO_SCHEMA_TYPE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="schema_registry.client.utils.SchemaVersion">SchemaVersion</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SchemaVersion If schema exist</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if a schema has already been registered under the specified subject.</span>

<span class="sd">    If so, this returns the schema string along with its globally unique identifier,</span>
<span class="sd">    its version under this subject and the subject name.</span>

<span class="sd">    POST /subjects/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        schema: Avro or JSON schema headers typing.Dict: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">        schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        SchemaVersion If schema exist</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

    <span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_versions</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
    <span class="n">schema_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">all</span><span class="p">((</span><span class="n">version</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;check_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
        <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> under subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span>
            <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
            <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
            <span class="n">schema</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get version of a schema&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.delete_subject" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_subject</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Deletes the specified subject and its associated compatibility level if registered.</p>
<p>It is recommended to use this API only when a topic needs to be
recycled or in development environments.</p>
<p>DELETE /subjects/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List version of the schema deleted under this subject</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_subject</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes the specified subject and its associated compatibility level if registered.</span>

<span class="sd">    It is recommended to use this API only when a topic needs to be</span>
<span class="sd">    recycled or in development environments.</span>

<span class="sd">    DELETE /subjects/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List version of the schema deleted under this subject</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_subject&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete subject&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.delete_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Deletes a specific version of the schema registered under this subject.</p>
<p>This only deletes the version and the schema ID remains intact making
it still possible to decode data using the schema ID.
This API is recommended to be used only in development environments or
under extreme circumstances where-in, its required to delete a previously
registered schema for compatibility purposes or re-register previously registered schema.</p>
<p>DELETE /subjects/(string: subject)/versions/(versionId: version)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[int, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Version of the schema to be deleted.
Valid values for versionId are between [1,2^31-1] or the string "latest".
"latest" deletes the last registered schema under the specified subject.</p>
              </div>
            </td>
            <td>
                  <code>&#39;latest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Version of the schema deleted. If the subject or version does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific version of the schema registered under this subject.</span>

<span class="sd">    This only deletes the version and the schema ID remains intact making</span>
<span class="sd">    it still possible to decode data using the schema ID.</span>
<span class="sd">    This API is recommended to be used only in development environments or</span>
<span class="sd">    under extreme circumstances where-in, its required to delete a previously</span>
<span class="sd">    registered schema for compatibility purposes or re-register previously registered schema.</span>

<span class="sd">    DELETE /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        version: Version of the schema to be deleted.</span>
<span class="sd">            Valid values for versionId are between [1,2^31-1] or the string &quot;latest&quot;.</span>
<span class="sd">            &quot;latest&quot; deletes the last registered schema under the specified subject.</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        Version of the schema deleted. If the subject or version does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_client_error</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete the version&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.get_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_by_id</span><span class="p">(</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Retrieve a parsed avro schema by id or None if not found.</p>
<p>GET /schemas/ids/{int: id}</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>schema_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema Id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_by_id</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a parsed avro schema by id or None if not found.</span>

<span class="sd">    GET /schemas/ids/{int: id}</span>

<span class="sd">    Args:</span>
<span class="sd">        schema_id: Schema Id</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        Avro or JSON schema</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_by_id&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">schema</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.get_compatibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_compatibility</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the current compatibility level for a subject.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,
FULL, FULL_TRANSITIVE, NONE</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="schema_registry.client.errors.ClientError">ClientError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the request was unsuccessful or an invalid
compatibility level was returned</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_compatibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current compatibility level for a subject.</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        One of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">            FULL, FULL_TRANSITIVE, NONE</span>

<span class="sd">    Raises:</span>
<span class="sd">        ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">            compatibility level was returned</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">compatibility</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compatibilityLevel&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="s2">&quot;No compatibility was returned&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">compatibility</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid compatibility level received: </span><span class="si">{</span><span class="n">error_msg_suffix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
                <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">compatibility</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unable to fetch compatibility level. Error code: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.get_schema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_schema</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get a specific version of the schema registered under this subject.</p>
<p>GET /subjects/(string: subject)/versions/(versionId: version)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[int, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>version id. If is None, the latest schema is returned</p>
              </div>
            </td>
            <td>
                  <code>&#39;latest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="schema_registry.client.utils.SchemaVersion">SchemaVersion</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SchemaVersion utils.SchemaVersion if response was succeeded</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a specific version of the schema registered under this subject.</span>

<span class="sd">    GET /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        version: version id. If is None, the latest schema is returned</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        The SchemaVersion utils.SchemaVersion if response was succeeded</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> under subjet </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not success version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.get_schema_subject_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_schema_subject_versions</span><span class="p">(</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get the subject-version pairs identified by the input ID.</p>
<p>GET /schemas/ids/{int: id}/versions</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>schema_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema Id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="schema_registry.client.schema.SubjectVersion">SubjectVersion</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Subject/Version pairs where Schema Id is registered</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_schema_subject_versions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">SubjectVersion</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the subject-version pairs identified by the input ID.</span>

<span class="sd">    GET /schemas/ids/{int: id}/versions</span>

<span class="sd">    Args:</span>
<span class="sd">        schema_id: Schema Id</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of Subject/Version pairs where Schema Id is registered</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema_subject_versions&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SubjectVersion</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">],</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.get_subjects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_subjects</span><span class="p">(</span><span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get list of all registered subjects in your Schema Registry.</p>
<p>GET /subjects/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of registered subjects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_subjects</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get list of all registered subjects in your Schema Registry.</span>

<span class="sd">    GET /subjects/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of registered subjects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_subjects&quot;</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get subjects&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.get_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_versions</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Get a list of versions registered under the specified subject.</p>
<p>GET subjects/{subject}/versions</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List  version of the schema registered under this subject</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_versions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a list of versions registered under the specified subject.</span>

<span class="sd">    GET subjects/{subject}/versions</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List  version of the schema registered under this subject</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_versions&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unable to get the versions for subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.register" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span> <span class="n">schema_type</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Register a schema for a subject.</p>
<p>Schema can be avro or json, and can be presented as a parsed schema or a string.
If schema is a string, the <code>schema_type</code> kwarg must be used to indicate
what type of schema the string is (<code>AVRO</code> by default).
If the schema is already parsed, the schema_type is inferred directly from the parsed schema.
Multiple instances of the same schema will result in cache misses.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>, str, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema to be registered</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema_type</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;AVRO&#39;, &#39;JSON&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of schema to parse if <code>schema</code> is a string. Default "AVRO"</p>
              </div>
            </td>
            <td>
                  <code><span title="schema_registry.client.utils.AVRO_SCHEMA_TYPE">AVRO_SCHEMA_TYPE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>schema_id</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a schema for a subject.</span>

<span class="sd">    Schema can be avro or json, and can be presented as a parsed schema or a string.</span>
<span class="sd">    If schema is a string, the `schema_type` kwarg must be used to indicate</span>
<span class="sd">    what type of schema the string is (`AVRO` by default).</span>
<span class="sd">    If the schema is already parsed, the schema_type is inferred directly from the parsed schema.</span>
<span class="sd">    Multiple instances of the same schema will result in cache misses.</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        schema: Avro or JSON schema to be registered</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">        schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        schema_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

    <span class="n">schema_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">schema_id</span>

    <span class="c1"># Check if schema is already registered. This should normally work even if</span>
    <span class="c1"># the schema registry we&#39;re talking to is readonly, enabling a setup where</span>
    <span class="c1"># only CI/CD can do changes to Schema Registry, and production code has readonly</span>
    <span class="c1"># access</span>

    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">schema_id</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
        <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="p">(</span>
        <span class="n">result</span><span class="p">,</span>
        <span class="n">code</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">))</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_401_UNAUTHORIZED</span><span class="p">,</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_403_FORBIDDEN</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unauthorized access&quot;</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_409_CONFLICT</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Incompatible schema&quot;</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid schema&quot;</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unable to register schema&quot;</span>

    <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">schema_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.test_compatibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_compatibility</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span> <span class="n">schema_type</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Test the compatibility of a candidate parsed schema for a given subject.</p>
<p>By default the latest version is checked against.</p>
<p>POST /compatibility/subjects/(string: subject)/versions/(versionId: version)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>, str, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema headers typing.Dict: Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[int, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The schema version to test compatibility against</p>
              </div>
            </td>
            <td>
                  <code>&#39;latest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>verbose</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether or not to return the errors in case of incompatibility</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema_type</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;AVRO&#39;, &#39;JSON&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of schema to parse if <code>schema</code> is a string. Default "AVRO"</p>
              </div>
            </td>
            <td>
                  <code><span title="schema_registry.client.utils.AVRO_SCHEMA_TYPE">AVRO_SCHEMA_TYPE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[bool, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If verbose if False: return a boolean wether the schema is compatible with the latest version for a subject</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[bool, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If verbose is True: return the API reponse with both the compatibility boolean and the possible errors</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_compatibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test the compatibility of a candidate parsed schema for a given subject.</span>

<span class="sd">    By default the latest version is checked against.</span>

<span class="sd">    POST /compatibility/subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        schema: Avro or JSON schema headers typing.Dict: Extra headers to add on the requests</span>
<span class="sd">        version: The schema version to test compatibility against</span>
<span class="sd">        verbose: Whether or not to return the errors in case of incompatibility</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">        schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        If verbose if False: return a boolean wether the schema is compatible with the latest version for a subject</span>
<span class="sd">        If verbose is True: return the API reponse with both the compatibility boolean and the possible errors</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;test_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
        <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">},</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject or version not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unprocessable entity. Invalid subject or schema: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_compatible&quot;</span><span class="p">)</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to check the compatibility&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.SchemaRegistryClient.update_compatibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_compatibility</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Update the compatibility level.</p>
<p>If subject is None, the compatibility level is global.</p>
<p>PUT /config/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>level</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>one of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,
FULL, FULL_TRANSITIVE, NONE</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Option subject</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the compatibility was updated</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="schema_registry.client.errors.ClientError">ClientError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the request was unsuccessful or an invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_compatibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the compatibility level.</span>

<span class="sd">    If subject is None, the compatibility level is global.</span>

<span class="sd">    PUT /config/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        level: one of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">            FULL, FULL_TRANSITIVE, NONE</span>
<span class="sd">        subject: Option subject</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the compatibility was updated</span>

<span class="sd">    Raises:</span>
<span class="sd">        ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid level specified: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;update_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;compatibility&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">}</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to update level: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="schema_registry.client.AsyncSchemaRegistryClient" class="doc doc-heading">
            <code>schema_registry.client.AsyncSchemaRegistryClient</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="schema_registry.client.client.BaseClient">BaseClient</span></code></p>


      <p>A client that talks to a Schema Registry over HTTP.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>url</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[str, <span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Url to schema registry or dictionary containing client configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ca_location</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>File or directory path to CA certificate(s) for verifying the Schema Registry key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cert_location</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to public key used for authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>key_location</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to private key used for authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>key_password</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Key password</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extra_headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on every requests.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="httpx.Timeout">Timeout</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>pool_limits</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="httpx.Limits">Limits</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The connection pool configuration to use when determining the maximum number of concurrently open
HTTP connections.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>auth</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="httpx.Auth">Auth</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Auth credentials.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>schema_registry/client/client.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AsyncSchemaRegistryClient</span><span class="p">(</span><span class="n">BaseClient</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A client that talks to a Schema Registry over HTTP.</span>

<span class="sd">    Args:</span>
<span class="sd">        url: Url to schema registry or dictionary containing client configuration.</span>
<span class="sd">        ca_location: File or directory path to CA certificate(s) for verifying the Schema Registry key.</span>
<span class="sd">        cert_location: Path to public key used for authentication.</span>
<span class="sd">        key_location: Path to private key used for authentication.</span>
<span class="sd">        key_password: Key password</span>
<span class="sd">        extra_headers: Extra headers to add on every requests.</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests.</span>
<span class="sd">        pool_limits: The connection pool configuration to use when determining the maximum number of concurrently open</span>
<span class="sd">            HTTP connections.</span>
<span class="sd">        auth: Auth credentials.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
        <span class="n">body</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">httpx</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_METHODS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Method </span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2"> is invalid; valid methods include </span><span class="si">{</span><span class="n">utils</span><span class="o">.</span><span class="n">VALID_METHODS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">_headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_headers</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">httpx</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">client_kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">_headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
        <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register a schema with the registry under the given subject and receive a schema id.</span>

<span class="sd">        Schema can be avro or json, and can be presented as a parsed schema or a string.</span>
<span class="sd">        If schema is a string, the `schema_type` kwarg must be used to indicate what type of schema the string is</span>
<span class="sd">        (&quot;AVRO&quot; by default).</span>
<span class="sd">        If the schema is already parsed, the schema_type is inferred directly from the parsed schema.</span>
<span class="sd">        Multiple instances of the same schema will result in cache misses.</span>

<span class="sd">        POST /subjects/(string: subject)/versions</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            schema: Avro or JSON schema to be registered</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">            schema_type typing.Union[AVRO, JSON]: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            schema_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

        <span class="n">schema_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">schema_id</span>

        <span class="c1"># Check if schema is already registered. This should normally work even if</span>
        <span class="c1"># the schema registry we&#39;re talking to is readonly, enabling a setup where</span>
        <span class="c1"># only CI/CD can do changes to Schema Registry, and production code has readonly</span>
        <span class="c1"># access</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">schema_id</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
            <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_401_UNAUTHORIZED</span><span class="p">,</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_403_FORBIDDEN</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unauthorized access&quot;</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_409_CONFLICT</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Incompatible Avro schema&quot;</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid Avro schema&quot;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unable to register schema&quot;</span>

        <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">schema_id</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_subjects</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get list of all registered subjects in your Schema Registry.</span>

<span class="sd">        GET /subjects/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of registered subjects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_subjects&quot;</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get subjects&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_subject</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes the specified subject and its associated compatibility level if registered.</span>

<span class="sd">        It is recommended to use this API only when a topic needs to be</span>
<span class="sd">        recycled or in development environments.</span>

<span class="sd">        DELETE /subjects/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List version of the schema deleted under this subject</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_subject&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete subject&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_by_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a parsed avro schema by id or None if not found.</span>

<span class="sd">        GET /schemas/ids/{int: id}</span>

<span class="sd">        Args:</span>
<span class="sd">            schema_id: Schema Id</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            Avro or JSON schema</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_by_id&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">schema</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_schema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a specific version of the schema registered under this subject.</span>

<span class="sd">        GET /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            version: version id. If is None, the latest schema is returned</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            SchemaVersion (nametupled): (subject, schema_id, schema, version)</span>

<span class="sd">            None: If server returns a not success response:</span>
<span class="sd">                404: Schema not found</span>
<span class="sd">                422: Unprocessable entity</span>
<span class="sd">                ~ (200 - 299): Not success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> under subjet </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not success version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_schema_subject_versions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">SubjectVersion</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the subject-version pairs identified by the input ID.</span>

<span class="sd">        GET /schemas/ids/{int: id}/versions</span>

<span class="sd">        Args:</span>
<span class="sd">            schema_id: Schema Id</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of Subject/Version pairs where Schema Id is registered</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema_subject_versions&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SubjectVersion</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">],</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">ret</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_versions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of versions registered under the specified subject.</span>

<span class="sd">        GET subjects/{subject}/versions</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            List version of the schema registered under this subject</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_versions&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to get the versions for subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_version</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes a specific version of the schema registered under this subject.</span>

<span class="sd">        This only deletes the version and the schema ID remains intact making</span>
<span class="sd">        it still possible to decode data using the schema ID.</span>
<span class="sd">        This API is recommended to be used only in development environments or</span>
<span class="sd">        under extreme circumstances where-in, its required to delete a previously</span>
<span class="sd">        registered schema for compatibility purposes or re-register previously registered schema.</span>

<span class="sd">        DELETE /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            version: Version of the schema to be deleted.</span>
<span class="sd">                Valid values for versionId are between [1,2^31-1] or the string &quot;latest&quot;.</span>
<span class="sd">                &quot;latest&quot; deletes the last registered schema under the specified subject.</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            Version of the schema deleted. If the subject or version does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_client_error</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete the version&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">check_version</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
        <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a schema has already been registered under the specified subject.</span>

<span class="sd">        If so, this returns the schema string along with its globally unique identifier,</span>
<span class="sd">        its version under this subject and the subject name.</span>

<span class="sd">        POST /subjects/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            schema: Avro or JSON schema</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">            schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            SchemaVersion If schema exist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">schemas_to_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_versions</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

        <span class="n">version</span> <span class="o">=</span> <span class="n">schemas_to_version</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

        <span class="n">schemas_to_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span>
        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">schemas_to_id</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">all</span><span class="p">((</span><span class="n">version</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;check_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
            <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> under subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
            <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

            <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span>
                <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
                <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span>
                <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
                <span class="n">schema</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get version of a schema&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
        <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
        <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the compatibility of a candidate parsed schema for a given subject.</span>

<span class="sd">        By default the latest version is checked against.</span>

<span class="sd">        POST /compatibility/subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            schema: Avro or JSON schema</span>
<span class="sd">            version: The schema version to test compatibility against</span>
<span class="sd">            verbose: Whether or not to return the errors in case of incompatibility</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">            schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            If verbose if False: return a boolean wether the schema is compatible with the latest version for a subject</span>
<span class="sd">            If verbose is True: return the API reponse with both the compatibility boolean and the possible errors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;test_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
            <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                <span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">},</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject or version not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unprocessable entity. Invalid subject or schema: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_compatible&quot;</span><span class="p">)</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to check the compatibility&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the compatibility level.</span>

<span class="sd">        If subject is None, the compatibility level is global.</span>

<span class="sd">        PUT /config/(string: subject)</span>

<span class="sd">        Args:</span>
<span class="sd">            level: one of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">                FULL, FULL_TRANSITIVE, NONE</span>
<span class="sd">            subject: Option subject</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            Whether the compatibility was updated</span>

<span class="sd">        Raises:</span>
<span class="sd">            ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid level specified: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;update_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;compatibility&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">}</span>

        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to update level: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current compatibility level for a subject.</span>

<span class="sd">        Args:</span>
<span class="sd">            subject: subject name</span>
<span class="sd">            headers: Extra headers to add on the requests</span>
<span class="sd">            timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">        Returns:</span>
<span class="sd">            One of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">                FULL, FULL_TRANSITIVE, NONE</span>

<span class="sd">        Raises:</span>
<span class="sd">            ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">                compatibility level was returned</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
        <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">compatibility</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compatibilityLevel&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="s2">&quot;No compatibility was returned&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">compatibility</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid compatibility level received: </span><span class="si">{</span><span class="n">error_msg_suffix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
                    <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">compatibility</span>

        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to fetch compatibility level. Error code: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
            <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.check_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span> <span class="n">schema_type</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Check if a schema has already been registered under the specified subject.</p>
<p>If so, this returns the schema string along with its globally unique identifier,
its version under this subject and the subject name.</p>
<p>POST /subjects/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>, str, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema_type</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;AVRO&#39;, &#39;JSON&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of schema to parse if <code>schema</code> is a string. Default "AVRO"</p>
              </div>
            </td>
            <td>
                  <code><span title="schema_registry.client.utils.AVRO_SCHEMA_TYPE">AVRO_SCHEMA_TYPE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="schema_registry.client.utils.SchemaVersion">SchemaVersion</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SchemaVersion If schema exist</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">check_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if a schema has already been registered under the specified subject.</span>

<span class="sd">    If so, this returns the schema string along with its globally unique identifier,</span>
<span class="sd">    its version under this subject and the subject name.</span>

<span class="sd">    POST /subjects/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        schema: Avro or JSON schema</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">        schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        SchemaVersion If schema exist</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">schemas_to_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_versions</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

    <span class="n">version</span> <span class="o">=</span> <span class="n">schemas_to_version</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

    <span class="n">schemas_to_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span>
    <span class="n">schema_id</span> <span class="o">=</span> <span class="n">schemas_to_id</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">all</span><span class="p">((</span><span class="n">version</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;check_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
        <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> under subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span>
            <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span>
            <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
            <span class="n">schema</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;schema&quot;</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get version of a schema&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.delete_subject" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_subject</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Deletes the specified subject and its associated compatibility level if registered.</p>
<p>It is recommended to use this API only when a topic needs to be
recycled or in development environments.</p>
<p>DELETE /subjects/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List version of the schema deleted under this subject</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_subject</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes the specified subject and its associated compatibility level if registered.</span>

<span class="sd">    It is recommended to use this API only when a topic needs to be</span>
<span class="sd">    recycled or in development environments.</span>

<span class="sd">    DELETE /subjects/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List version of the schema deleted under this subject</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_subject&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete subject&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.delete_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Deletes a specific version of the schema registered under this subject.</p>
<p>This only deletes the version and the schema ID remains intact making
it still possible to decode data using the schema ID.
This API is recommended to be used only in development environments or
under extreme circumstances where-in, its required to delete a previously
registered schema for compatibility purposes or re-register previously registered schema.</p>
<p>DELETE /subjects/(string: subject)/versions/(versionId: version)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[int, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Version of the schema to be deleted.
Valid values for versionId are between [1,2^31-1] or the string "latest".
"latest" deletes the last registered schema under the specified subject.</p>
              </div>
            </td>
            <td>
                  <code>&#39;latest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[int]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Version of the schema deleted. If the subject or version does not exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes a specific version of the schema registered under this subject.</span>

<span class="sd">    This only deletes the version and the schema ID remains intact making</span>
<span class="sd">    it still possible to decode data using the schema ID.</span>
<span class="sd">    This API is recommended to be used only in development environments or</span>
<span class="sd">    under extreme circumstances where-in, its required to delete a previously</span>
<span class="sd">    registered schema for compatibility purposes or re-register previously registered schema.</span>

<span class="sd">    DELETE /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        version: Version of the schema to be deleted.</span>
<span class="sd">            Valid values for versionId are between [1,2^31-1] or the string &quot;latest&quot;.</span>
<span class="sd">            &quot;latest&quot; deletes the last registered schema under the specified subject.</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        Version of the schema deleted. If the subject or version does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;delete_version&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_client_error</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to delete the version&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.get_by_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_by_id</span><span class="p">(</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Retrieve a parsed avro schema by id or None if not found.</p>
<p>GET /schemas/ids/{int: id}</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>schema_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema Id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_by_id</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a parsed avro schema by id or None if not found.</span>

<span class="sd">    GET /schemas/ids/{int: id}</span>

<span class="sd">    Args:</span>
<span class="sd">        schema_id: Schema Id</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        Avro or JSON schema</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_by_id&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">schema</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.get_compatibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_compatibility</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Get the current compatibility level for a subject.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,
FULL, FULL_TRANSITIVE, NONE</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="schema_registry.client.errors.ClientError">ClientError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the request was unsuccessful or an invalid
compatibility level was returned</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_compatibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current compatibility level for a subject.</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        One of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">            FULL, FULL_TRANSITIVE, NONE</span>

<span class="sd">    Raises:</span>
<span class="sd">        ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">            compatibility level was returned</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">compatibility</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;compatibilityLevel&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">compatibility</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="s2">&quot;No compatibility was returned&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">error_msg_suffix</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">compatibility</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid compatibility level received: </span><span class="si">{</span><span class="n">error_msg_suffix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
                <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">compatibility</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unable to fetch compatibility level. Error code: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.get_schema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_schema</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Get a specific version of the schema registered under this subject.</p>
<p>GET /subjects/(string: subject)/versions/(versionId: version)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[int, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>version id. If is None, the latest schema is returned</p>
              </div>
            </td>
            <td>
                  <code>&#39;latest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>SchemaVersion</code></td>            <td>
                  <code>nametupled</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(subject, schema_id, schema, version)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>None</code></td>            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="schema_registry.client.utils.SchemaVersion">SchemaVersion</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If server returns a not success response:
404: Schema not found
422: Unprocessable entity
~ (200 - 299): Not success</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_schema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a specific version of the schema registered under this subject.</span>

<span class="sd">    GET /subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        version: version id. If is None, the latest schema is returned</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        SchemaVersion (nametupled): (subject, schema_id, schema, version)</span>

<span class="sd">        None: If server returns a not success response:</span>
<span class="sd">            404: Schema not found</span>
<span class="sd">            422: Unprocessable entity</span>
<span class="sd">            ~ (200 - 299): Not success</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> under subjet </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Not success version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">:</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_to_schema</span><span class="p">[</span><span class="n">schema_id</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema_from_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="n">version</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">SchemaVersion</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">schema</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.get_schema_subject_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_schema_subject_versions</span><span class="p">(</span><span class="n">schema_id</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Get the subject-version pairs identified by the input ID.</p>
<p>GET /schemas/ids/{int: id}/versions</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>schema_id</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Schema Id</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="schema_registry.client.schema.SubjectVersion">SubjectVersion</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Subject/Version pairs where Schema Id is registered</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_schema_subject_versions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">schema_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">SubjectVersion</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the subject-version pairs identified by the input ID.</span>

<span class="sd">    GET /schemas/ids/{int: id}/versions</span>

<span class="sd">    Args:</span>
<span class="sd">        schema_id: Schema Id</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of Subject/Version pairs where Schema Id is registered</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_schema_subject_versions&quot;</span><span class="p">,</span> <span class="n">schema_id</span><span class="o">=</span><span class="n">schema_id</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2"> not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SubjectVersion</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">],</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Received bad schema (id </span><span class="si">{</span><span class="n">schema_id</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.get_subjects" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_subjects</span><span class="p">(</span><span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Get list of all registered subjects in your Schema Registry.</p>
<p>GET /subjects/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of registered subjects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_subjects</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get list of all registered subjects in your Schema Registry.</span>

<span class="sd">    GET /subjects/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of registered subjects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_subjects&quot;</span><span class="p">)</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to get subjects&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.get_versions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_versions</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Get a list of versions registered under the specified subject.</p>
<p>GET subjects/{subject}/versions</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List version of the schema registered under this subject</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_versions</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a list of versions registered under the specified subject.</span>

<span class="sd">    GET subjects/{subject}/versions</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        List version of the schema registered under this subject</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;get_versions&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Unable to get the versions for subject </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span>
        <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.register" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span> <span class="n">schema_type</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Register a schema with the registry under the given subject and receive a schema id.</p>
<p>Schema can be avro or json, and can be presented as a parsed schema or a string.
If schema is a string, the <code>schema_type</code> kwarg must be used to indicate what type of schema the string is
("AVRO" by default).
If the schema is already parsed, the schema_type is inferred directly from the parsed schema.
Multiple instances of the same schema will result in cache misses.</p>
<p>POST /subjects/(string: subject)/versions</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>, str, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema to be registered</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema_type</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[AVRO, JSON]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of schema to parse if <code>schema</code> is a string. Default "AVRO"</p>
              </div>
            </td>
            <td>
                  <code><span title="schema_registry.client.utils.AVRO_SCHEMA_TYPE">AVRO_SCHEMA_TYPE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>schema_id</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a schema with the registry under the given subject and receive a schema id.</span>

<span class="sd">    Schema can be avro or json, and can be presented as a parsed schema or a string.</span>
<span class="sd">    If schema is a string, the `schema_type` kwarg must be used to indicate what type of schema the string is</span>
<span class="sd">    (&quot;AVRO&quot; by default).</span>
<span class="sd">    If the schema is already parsed, the schema_type is inferred directly from the parsed schema.</span>
<span class="sd">    Multiple instances of the same schema will result in cache misses.</span>

<span class="sd">    POST /subjects/(string: subject)/versions</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        schema: Avro or JSON schema to be registered</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">        schema_type typing.Union[AVRO, JSON]: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        schema_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

    <span class="n">schema_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subject_to_schema_ids</span><span class="p">[</span><span class="n">subject</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">schema_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">schema_id</span>

    <span class="c1"># Check if schema is already registered. This should normally work even if</span>
    <span class="c1"># the schema registry we&#39;re talking to is readonly, enabling a setup where</span>
    <span class="c1"># only CI/CD can do changes to Schema Registry, and production code has readonly</span>
    <span class="c1"># access</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_version</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">schema_id</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;register&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
        <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">msg</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_401_UNAUTHORIZED</span><span class="p">,</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_403_FORBIDDEN</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unauthorized access&quot;</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_409_CONFLICT</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Incompatible Avro schema&quot;</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid Avro schema&quot;</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Unable to register schema&quot;</span>

    <span class="k">if</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>

    <span class="n">schema_id</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cache_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_id</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">schema_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.test_compatibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_compatibility</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span> <span class="n">schema_type</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Test the compatibility of a candidate parsed schema for a given subject.</p>
<p>By default the latest version is checked against.</p>
<p>POST /compatibility/subjects/(string: subject)/versions/(versionId: version)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>subject name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="schema_registry.client.schema.BaseSchema">BaseSchema</span>, str, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Avro or JSON schema</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>version</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[int, str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The schema version to test compatibility against</p>
              </div>
            </td>
            <td>
                  <code>&#39;latest&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>verbose</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether or not to return the errors in case of incompatibility</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>schema_type</code></td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;AVRO&#39;, &#39;JSON&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of schema to parse if <code>schema</code> is a string. Default "AVRO"</p>
              </div>
            </td>
            <td>
                  <code><span title="schema_registry.client.utils.AVRO_SCHEMA_TYPE">AVRO_SCHEMA_TYPE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[bool, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If verbose if False: return a boolean wether the schema is compatible with the latest version for a subject</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[bool, <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If verbose is True: return the API reponse with both the compatibility boolean and the possible errors</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">test_compatibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">schema</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BaseSchema</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
    <span class="n">schema_type</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AVRO&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">AVRO_SCHEMA_TYPE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test the compatibility of a candidate parsed schema for a given subject.</span>

<span class="sd">    By default the latest version is checked against.</span>

<span class="sd">    POST /compatibility/subjects/(string: subject)/versions/(versionId: version)</span>

<span class="sd">    Args:</span>
<span class="sd">        subject: subject name</span>
<span class="sd">        schema: Avro or JSON schema</span>
<span class="sd">        version: The schema version to test compatibility against</span>
<span class="sd">        verbose: Whether or not to return the errors in case of incompatibility</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>
<span class="sd">        schema_type: The type of schema to parse if `schema` is a string. Default &quot;AVRO&quot;</span>

<span class="sd">    Returns:</span>
<span class="sd">        If verbose if False: return a boolean wether the schema is compatible with the latest version for a subject</span>
<span class="sd">        If verbose is True: return the API reponse with both the compatibility boolean and the possible errors</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;test_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">schema_type</span><span class="p">)</span>

    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">raw_schema</span><span class="p">),</span>
        <span class="s2">&quot;schemaType&quot;</span><span class="p">:</span> <span class="n">schema</span><span class="o">.</span><span class="n">schema_type</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;verbose&quot;</span><span class="p">:</span> <span class="n">verbose</span><span class="p">},</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_404_NOT_FOUND</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subject or version not found: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">elif</span> <span class="n">code</span> <span class="o">==</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_422_UNPROCESSABLE_ENTITY</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unprocessable entity. Invalid subject or schema: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">elif</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_compatible&quot;</span><span class="p">)</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="s2">&quot;Unable to check the compatibility&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="schema_registry.client.AsyncSchemaRegistryClient.update_compatibility" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_compatibility</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">USE_CLIENT_DEFAULT</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

      <p>Update the compatibility level.</p>
<p>If subject is None, the compatibility level is global.</p>
<p>PUT /config/(string: subject)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>level</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>one of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,
FULL, FULL_TRANSITIVE, NONE</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>subject</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Option subject</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>headers</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra headers to add on the requests</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="httpx._types.TimeoutTypes">TimeoutTypes</span>, <span title="httpx._client.UseClientDefault">UseClientDefault</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</p>
              </div>
            </td>
            <td>
                  <code><span title="httpx.USE_CLIENT_DEFAULT">USE_CLIENT_DEFAULT</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether the compatibility was updated</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="schema_registry.client.errors.ClientError">ClientError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the request was unsuccessful or an invalid</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>schema_registry/client/client.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">update_compatibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">subject</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">TimeoutTypes</span><span class="p">,</span> <span class="n">UseClientDefault</span><span class="p">]</span> <span class="o">=</span> <span class="n">USE_CLIENT_DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the compatibility level.</span>

<span class="sd">    If subject is None, the compatibility level is global.</span>

<span class="sd">    PUT /config/(string: subject)</span>

<span class="sd">    Args:</span>
<span class="sd">        level: one of BACKWARD, BACKWARD_TRANSITIVE, FORWARD, FORWARD_TRANSITIVE,</span>
<span class="sd">            FULL, FULL_TRANSITIVE, NONE</span>
<span class="sd">        subject: Option subject</span>
<span class="sd">        headers: Extra headers to add on the requests</span>
<span class="sd">        timeout: The timeout configuration to use when sending requests. Default USE_CLIENT_DEFAULT</span>

<span class="sd">    Returns:</span>
<span class="sd">        Whether the compatibility was updated</span>

<span class="sd">    Raises:</span>
<span class="sd">        ClientError: if the request was unsuccessful or an invalid</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">VALID_LEVELS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid level specified: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">url</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url_manager</span><span class="o">.</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;update_compatibility&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="n">subject</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;compatibility&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">}</span>

    <span class="n">result</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="n">get_response_and_status_code</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">status</span><span class="o">.</span><span class="n">is_success</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">raise</span> <span class="n">ClientError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to update level: </span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="n">http_code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">server_traceback</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="auth">Auth</h2>
<p>Credentials can be supplied in <code>two</code> different ways: using the <code>url</code> or the <code>schema_registry.client.Auth</code>.</p>
<div class="highlight"><span class="filename">Credentials using Auth</span><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">schema_registry.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">SchemaRegistryClient</span><span class="p">,</span> <span class="n">Auth</span>

<span class="n">SchemaRegistryClient</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://user_url:secret_url@127.0.0.1:65534&quot;</span><span class="p">,</span>
    <span class="n">auth</span><span class="o">=</span><span class="n">Auth</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;secret-user&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;secret&quot;</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><span class="filename">Credentials using the url</span><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">schema_registry.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">SchemaRegistryClient</span>

<span class="n">username</span><span class="o">=</span><span class="s2">&quot;secret-username&quot;</span>
<span class="n">password</span><span class="o">=</span><span class="s2">&quot;secret&quot;</span>

<span class="n">SchemaRegistryClient</span><span class="p">({</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">@127.0.0.1:65534&quot;</span><span class="p">})</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This auth methods are the same for <code>AsyncSchemaRegistryClient</code></p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>